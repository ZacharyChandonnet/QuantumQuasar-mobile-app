{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { auth, db } from \"../FirebaseConfig.js\";\nimport { doc, getDoc } from 'firebase/firestore';\nimport Navbar from \"../screens/Navbar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Search(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    userCoins = _useState2[0],\n    setUserCoins = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dataCoins = _useState6[0],\n    setDataCoins = _useState6[1];\n  useEffect(function () {\n    var unsubscribe = auth.onAuthStateChanged(function () {\n      var _ref2 = _asyncToGenerator(function* (user) {\n        if (user) {\n          var userId = user.uid;\n          var userDocRef = doc(db, 'users', userId);\n          var userDocSnapshot = yield getDoc(userDocRef);\n          if (userDocSnapshot.exists()) {\n            var coinsLike = userDocSnapshot.data().CoinsLike || [];\n            setUserCoins(coinsLike);\n            setLoading(false);\n          }\n        } else {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  useEffect(function () {\n    if (loading) {\n      return;\n    }\n    var fetchCoinsData = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        var promises = userCoins.map(function () {\n          var _ref4 = _asyncToGenerator(function* (coinId) {\n            var response = yield fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`);\n            var data = yield response.json();\n            return data;\n          });\n          return function (_x2) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n        var coinsData = yield Promise.all(promises);\n        setDataCoins(coinsData);\n      });\n      return function fetchCoinsData() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    fetchCoinsData();\n  }, [userCoins, loading]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Navbar, {\n      style: styles.navBar,\n      navigation: navigation\n    }), _jsx(Text, {\n      style: styles.text,\n      children: \"Mes jetons favoris\"\n    }), _jsx(FlatList, {\n      showsVerticalScrollIndicator: false,\n      data: dataCoins,\n      keyExtractor: function keyExtractor(item) {\n        return item.id ? item.id.toString() : Math.random().toString();\n      },\n      renderItem: function renderItem(_ref5) {\n        var item = _ref5.item;\n        return _jsxs(TouchableOpacity, {\n          style: styles.itemContainer,\n          onPress: function onPress() {\n            return navigation.navigate('Coin', {\n              id: item.id\n            });\n          },\n          children: [_jsx(Image, {\n            style: styles.cryptoImage,\n            source: {\n              uri: item.image\n            }\n          }), _jsxs(View, {\n            style: styles.textContainer,\n            children: [_jsx(Text, {\n              style: styles.cryptoName,\n              children: item.name\n            }), _jsxs(Text, {\n              style: styles.price,\n              children: [item.current_price, \" USD\"]\n            })]\n          })]\n        });\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#121212'\n  },\n  itemContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 70,\n    borderBottomWidth: 1,\n    borderBottomColor: '#333',\n    width: '100%'\n  },\n  cryptoImage: {\n    width: 40,\n    height: 40,\n    borderRadius: 20\n  },\n  textContainer: {\n    marginLeft: 15\n  },\n  cryptoName: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  cryptoSymbol: {\n    color: '#888',\n    fontSize: 14,\n    marginTop: 5\n  },\n  price: {\n    color: 'white',\n    fontSize: 14,\n    marginTop: 5\n  },\n  text: {\n    color: 'white',\n    fontSize: 24,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","FlatList","TouchableOpacity","Image","auth","db","doc","getDoc","Navbar","jsx","_jsx","jsxs","_jsxs","Search","_ref","navigation","_useState","_useState2","_slicedToArray","userCoins","setUserCoins","_useState3","_useState4","loading","setLoading","_useState5","_useState6","dataCoins","setDataCoins","unsubscribe","onAuthStateChanged","_ref2","_asyncToGenerator","user","userId","uid","userDocRef","userDocSnapshot","exists","coinsLike","data","CoinsLike","_x","apply","arguments","fetchCoinsData","_ref3","promises","map","_ref4","coinId","response","fetch","json","_x2","coinsData","Promise","all","style","styles","container","children","navBar","text","showsVerticalScrollIndicator","keyExtractor","item","id","toString","Math","random","renderItem","_ref5","itemContainer","onPress","navigate","cryptoImage","source","uri","image","textContainer","cryptoName","name","price","current_price","create","flex","alignItems","justifyContent","backgroundColor","flexDirection","padding","borderBottomWidth","borderBottomColor","width","height","borderRadius","marginLeft","color","fontSize","fontWeight","cryptoSymbol","marginTop"],"sources":["D:/0-ProjetPerso/QuantumQuasar/QuantumQuasar/screens/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity,Image } from 'react-native';\r\nimport { auth, db } from '../FirebaseConfig.js';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport Navbar from \"../screens/Navbar\";\r\n\r\n\r\nexport default function Search({ navigation }) {\r\n    const [userCoins, setUserCoins] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [dataCoins, setDataCoins] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(async (user) => {\r\n            if (user) {\r\n                const userId = user.uid;\r\n                const userDocRef = doc(db, 'users', userId);\r\n                const userDocSnapshot = await getDoc(userDocRef);\r\n\r\n                if (userDocSnapshot.exists()) {\r\n                    const coinsLike = userDocSnapshot.data().CoinsLike || [];\r\n                    setUserCoins(coinsLike);\r\n                    setLoading(false);\r\n                }\r\n            } else {\r\n                setLoading(false);\r\n            }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (loading) {\r\n            return;\r\n        }\r\n\r\n        const fetchCoinsData = async () => {\r\n            const promises = userCoins.map(async (coinId) => {\r\n                const response = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`);\r\n                const data = await response.json();\r\n                return data;\r\n            });\r\n\r\n            const coinsData = await Promise.all(promises);\r\n            setDataCoins(coinsData);\r\n        };\r\n\r\n        fetchCoinsData();\r\n    }, [userCoins, loading]);\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Navbar style={styles.navBar} navigation={navigation} />\r\n            <Text style={styles.text}>Mes jetons favoris</Text>\r\n            <FlatList\r\n                showsVerticalScrollIndicator={false}\r\n                data={dataCoins}\r\n                keyExtractor={(item) => item.id ? item.id.toString() : Math.random().toString()}\r\n                renderItem={({ item }) => (\r\n                    <TouchableOpacity style={styles.itemContainer} onPress={() => navigation.navigate('Coin', { id: item.id })}>\r\n                        <Image\r\n                            style={styles.cryptoImage}\r\n                            source={{ uri: item.image }}\r\n                        />\r\n                        <View style={styles.textContainer}>\r\n                            <Text style={styles.cryptoName}>{item.name}</Text>\r\n                            <Text style={styles.price}>{item.current_price} USD</Text>\r\n                        </View>\r\n                    </TouchableOpacity>\r\n                )}\r\n            />\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#121212',\r\n    },\r\n    itemContainer: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        padding: 70,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#333',\r\n        width: '100%',\r\n    },\r\n    cryptoImage: {\r\n        width: 40,\r\n        height: 40,\r\n        borderRadius: 20,\r\n    },\r\n    textContainer: {\r\n        marginLeft: 15,\r\n    },\r\n    cryptoName: {\r\n        color: 'white',\r\n        fontSize: 16,\r\n        fontWeight: 'bold',\r\n    },\r\n    cryptoSymbol: {\r\n        color: '#888',\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n    },\r\n    price: {\r\n        color: 'white',\r\n        fontSize: 14,\r\n        marginTop: 5,\r\n    },\r\n    text: {\r\n        color: 'white',\r\n        fontSize: 24,\r\n        fontWeight: 'bold',\r\n    },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}