{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { auth, db } from \"../FirebaseConfig.js\";\nimport { doc, getDoc } from 'firebase/firestore';\nimport Navbar from \"../screens/Navbar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Search(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    userCoins = _useState2[0],\n    setUserCoins = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    dataCoins = _useState6[0],\n    setDataCoins = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    dataNfts = _useState8[0],\n    setDataNfts = _useState8[1];\n  useEffect(function () {\n    var unsubscribe = auth.onAuthStateChanged(function () {\n      var _ref2 = _asyncToGenerator(function* (user) {\n        if (user) {\n          var userId = user.uid;\n          var userDocRef = doc(db, 'users', userId);\n          var userDocSnapshot = yield getDoc(userDocRef);\n          if (userDocSnapshot.exists()) {\n            var coinsLike = userDocSnapshot.data().CoinsLike || [];\n            setUserCoins(coinsLike);\n            setDataNfts(nftsLike);\n            var nftsLike = userDocSnapshot.data().NftLike || [];\n            setLoading(false);\n          }\n        } else {\n          setLoading(false);\n        }\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  useEffect(function () {\n    if (loading) {\n      return;\n    }\n    var fetchCoinsData = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        var promises = userCoins.map(function () {\n          var _ref4 = _asyncToGenerator(function* (coinId) {\n            var response = yield fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`);\n            var data = yield response.json();\n            return data;\n          });\n          return function (_x2) {\n            return _ref4.apply(this, arguments);\n          };\n        }());\n        var coinsData = yield Promise.all(promises);\n        setDataCoins(coinsData);\n      });\n      return function fetchCoinsData() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    fetchCoinsData();\n  }, [userCoins, loading]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Navbar, {\n      style: styles.navBar,\n      navigation: navigation\n    }), _jsx(Text, {\n      style: styles.text,\n      children: \"Mes jetons favoris\"\n    }), _jsx(ScrollView, {\n      children: dataCoins.map(function (item, index) {\n        var _item$image, _item$symbol, _item$market_data, _item$market_data$cur, _item$market_data$cur2;\n        return _jsxs(TouchableOpacity, {\n          style: styles.coinItem,\n          children: [_jsx(Image, {\n            source: {\n              uri: (_item$image = item.image) == null ? void 0 : _item$image.small\n            },\n            style: {\n              width: 30,\n              height: 30\n            }\n          }), _jsx(Text, {\n            style: styles.coinSymbol,\n            children: (_item$symbol = item.symbol) == null ? void 0 : _item$symbol.toUpperCase()\n          }), _jsx(Text, {\n            style: styles.coinName,\n            children: item.name\n          }), _jsxs(Text, {\n            style: styles.coinPrice,\n            children: [\"$\", (_item$market_data = item.market_data) == null ? void 0 : (_item$market_data$cur = _item$market_data.current_price) == null ? void 0 : (_item$market_data$cur2 = _item$market_data$cur.usd) == null ? void 0 : _item$market_data$cur2.toFixed(2)]\n          })]\n        }, index);\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#121212'\n  },\n  text: {\n    color: 'white',\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginTop: 30,\n    marginBottom: 30\n  },\n  coinItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderBottomWidth: 1,\n    borderBottomColor: '#333',\n    width: '100%'\n  },\n  coinSymbol: {\n    color: '#fff',\n    fontSize: 18,\n    fontWeight: 'bold'\n  },\n  coinName: {\n    color: '#ddd',\n    fontSize: 16\n  },\n  coinPrice: {\n    color: '#34c759',\n    fontSize: 18,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","ScrollView","TouchableOpacity","Image","auth","db","doc","getDoc","Navbar","jsx","_jsx","jsxs","_jsxs","Search","_ref","navigation","_useState","_useState2","_slicedToArray","userCoins","setUserCoins","_useState3","_useState4","loading","setLoading","_useState5","_useState6","dataCoins","setDataCoins","_useState7","_useState8","dataNfts","setDataNfts","unsubscribe","onAuthStateChanged","_ref2","_asyncToGenerator","user","userId","uid","userDocRef","userDocSnapshot","exists","coinsLike","data","CoinsLike","nftsLike","NftLike","_x","apply","arguments","fetchCoinsData","_ref3","promises","map","_ref4","coinId","response","fetch","json","_x2","coinsData","Promise","all","style","styles","container","children","navBar","text","item","index","_item$image","_item$symbol","_item$market_data","_item$market_data$cur","_item$market_data$cur2","coinItem","source","uri","image","small","width","height","coinSymbol","symbol","toUpperCase","coinName","name","coinPrice","market_data","current_price","usd","toFixed","create","flex","alignItems","justifyContent","backgroundColor","color","fontSize","fontWeight","marginTop","marginBottom","flexDirection","borderBottomWidth","borderBottomColor"],"sources":["D:/0-ProjetPerso/QuantumQuasar/QuantumQuasar/screens/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, Image } from 'react-native';\r\nimport { auth, db } from '../FirebaseConfig.js';\r\nimport { doc, getDoc } from 'firebase/firestore';\r\nimport Navbar from \"../screens/Navbar\";\r\n\r\nexport default function Search({ navigation }) {\r\n    const [userCoins, setUserCoins] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [dataCoins, setDataCoins] = useState([]);\r\n    const [dataNfts, setDataNfts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(async (user) => {\r\n            if (user) {\r\n                const userId = user.uid;\r\n                const userDocRef = doc(db, 'users', userId);\r\n                const userDocSnapshot = await getDoc(userDocRef);\r\n\r\n\r\n                if (userDocSnapshot.exists()) {\r\n                    const coinsLike = userDocSnapshot.data().CoinsLike || [];\r\n                    setUserCoins(coinsLike);\r\n                    setDataNfts(nftsLike);\r\n                    const nftsLike = userDocSnapshot.data().NftLike || [];\r\n                    setLoading(false);\r\n                }\r\n\r\n            } else {\r\n                setLoading(false);\r\n            }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (loading) {\r\n            return;\r\n        }\r\n\r\n        const fetchCoinsData = async () => {\r\n            const promises = userCoins.map(async (coinId) => {\r\n                const response = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}`);\r\n                const data = await response.json();\r\n                return data;\r\n            });\r\n\r\n            const coinsData = await Promise.all(promises);\r\n            setDataCoins(coinsData);\r\n        };\r\n\r\n        fetchCoinsData();\r\n    }, [userCoins, loading]);\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Navbar style={styles.navBar} navigation={navigation} />\r\n            <Text style={styles.text}>Mes jetons favoris</Text>\r\n            <ScrollView>\r\n                {dataCoins.map((item, index) => (\r\n                    <TouchableOpacity style={styles.coinItem} key={index}>\r\n                        <Image source={{ uri: item.image?.small }} style={{ width: 30, height: 30 }} />\r\n                        <Text style={styles.coinSymbol}>{item.symbol?.toUpperCase()}</Text>\r\n                        <Text style={styles.coinName}>{item.name}</Text>\r\n                        <Text style={styles.coinPrice}>${item.market_data?.current_price?.usd?.toFixed(2)}</Text>\r\n                    </TouchableOpacity>\r\n                ))}\r\n               {/* {dataNfts.map((item, index) => (\r\n                    <TouchableOpacity style={styles.coinItem} key={index}>\r\n                        <Image source={{ uri: item.image?.small }} style={{ width: 30, height: 30 }} />\r\n                        <Text style={styles.coinSymbol}>{item.symbol?.toUpperCase()}</Text>\r\n                        <Text style={styles.coinName}>{item.name}</Text>\r\n                        <Text style={styles.coinPrice}>${item.market_data?.current_price?.usd?.toFixed(2)}</Text>\r\n                    </TouchableOpacity>\r\n                ))} */}\r\n            </ScrollView>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#121212',\r\n    },\r\n    text: {\r\n        color: 'white',\r\n        fontSize: 24,\r\n        fontWeight: 'bold',\r\n        marginTop: 30,\r\n        marginBottom: 30,\r\n    },\r\n    coinItem: {\r\n        flexDirection: 'row',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#333',\r\n        width: '100%',\r\n    },\r\n    \r\n    \r\n    coinSymbol: {\r\n        color: '#fff',\r\n        fontSize: 18,\r\n        fontWeight: 'bold',\r\n    },\r\n    coinName: {\r\n        color: '#ddd',\r\n        fontSize: 16,\r\n    },\r\n    coinPrice: {\r\n        color: '#34c759',\r\n        fontSize: 18,\r\n        fontWeight: 'bold',\r\n    },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}