{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { setDoc, doc, arrayUnion, arrayRemove, getDoc } from 'firebase/firestore';\nimport { db, auth } from \"../FirebaseConfig.js\";\nimport { Ionicons } from '@expo/vector-icons';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function FavoriteCoin(_ref) {\n  var coinId = _ref.coinId;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFavorite = _useState2[0],\n    setFavorite = _useState2[1];\n  useEffect(function () {\n    var fetchUserFavorites = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var userDoc = yield getDoc(doc(db, 'users', auth.currentUser.uid));\n        if (userDoc.exists()) {\n          var userFavorites = userDoc.data().CoinsLike || [];\n          setFavorite(userFavorites.includes(coinId));\n        }\n      });\n      return function fetchUserFavorites() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchUserFavorites();\n  }, [coinId]);\n  var toggleFavorite = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (isFavorite) {\n        yield setDoc(doc(db, 'users', auth.currentUser.uid), {\n          CoinsLike: arrayRemove(coinId)\n        }, {\n          merge: true\n        });\n      } else {\n        yield setDoc(doc(db, 'users', auth.currentUser.uid), {\n          CoinsLike: arrayUnion(coinId)\n        }, {\n          merge: true\n        });\n      }\n      setFavorite(!isFavorite);\n    });\n    return function toggleFavorite() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(TouchableOpacity, {\n    onPress: toggleFavorite,\n    children: _jsx(Ionicons, {\n      style: styles.stars,\n      name: \"star\",\n      size: 24,\n      color: isFavorite ? \"orange\" : \"gray\"\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  stars: {\n    padding: 15\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","setDoc","doc","arrayUnion","arrayRemove","getDoc","db","auth","Ionicons","StyleSheet","TouchableOpacity","jsx","_jsx","FavoriteCoin","_ref","coinId","_useState","_useState2","_slicedToArray","isFavorite","setFavorite","fetchUserFavorites","_ref2","_asyncToGenerator","userDoc","currentUser","uid","exists","userFavorites","data","CoinsLike","includes","apply","arguments","toggleFavorite","_ref3","merge","onPress","children","style","styles","stars","name","size","color","create","padding"],"sources":["D:/0-ProjetPerso/QuantumQuasar/QuantumQuasar/screens/FavoriteCoin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { setDoc, doc, arrayUnion, arrayRemove, getDoc } from 'firebase/firestore';\r\nimport { db, auth } from '../FirebaseConfig.js';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nexport default function FavoriteCoin({ coinId }) {\r\n    const [isFavorite, setFavorite] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUserFavorites = async () => {\r\n            const userDoc = await getDoc(doc(db, 'users', auth.currentUser.uid));\r\n            if (userDoc.exists()) {\r\n                const userFavorites = userDoc.data().CoinsLike || [];\r\n                setFavorite(userFavorites.includes(coinId));\r\n            }\r\n        };\r\n\r\n        fetchUserFavorites();\r\n    }, [coinId]);\r\n\r\n    const toggleFavorite = async () => {\r\n        if (isFavorite) {\r\n            await setDoc(doc(db, 'users', auth.currentUser.uid), {\r\n                CoinsLike: arrayRemove(coinId)\r\n            }, { merge: true });\r\n        } else {\r\n            await setDoc(doc(db, 'users', auth.currentUser.uid), {\r\n                CoinsLike: arrayUnion(coinId)\r\n            }, { merge: true });\r\n        }\r\n        setFavorite(!isFavorite);\r\n    }\r\n\r\n    return (\r\n        <TouchableOpacity onPress={toggleFavorite}>\r\n            <Ionicons style={styles.stars} name=\"star\" size={24} color={isFavorite ? \"orange\" : \"gray\"} />\r\n        </TouchableOpacity>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    stars: {\r\n        padding: 15,\r\n    },\r\n});\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,MAAM,EAAEC,GAAG,EAAEC,UAAU,EAAEC,WAAW,EAAEC,MAAM,QAAQ,oBAAoB;AACjF,SAASC,EAAE,EAAEC,IAAI;AACjB,SAASC,QAAQ,QAAQ,oBAAoB;AAAC,OAAAC,UAAA;AAAA,OAAAC,gBAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAG9C,eAAe,SAASC,YAAYA,CAAAC,IAAA,EAAa;EAAA,IAAVC,MAAM,GAAAD,IAAA,CAANC,MAAM;EACzC,IAAAC,SAAA,GAAkCjB,QAAQ,CAAC,KAAK,CAAC;IAAAkB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA1CG,UAAU,GAAAF,UAAA;IAAEG,WAAW,GAAAH,UAAA;EAE9BjB,SAAS,CAAC,YAAM;IACZ,IAAMqB,kBAAkB;MAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;QACnC,IAAMC,OAAO,SAASnB,MAAM,CAACH,GAAG,CAACI,EAAE,EAAE,OAAO,EAAEC,IAAI,CAACkB,WAAW,CAACC,GAAG,CAAC,CAAC;QACpE,IAAIF,OAAO,CAACG,MAAM,CAAC,CAAC,EAAE;UAClB,IAAMC,aAAa,GAAGJ,OAAO,CAACK,IAAI,CAAC,CAAC,CAACC,SAAS,IAAI,EAAE;UACpDV,WAAW,CAACQ,aAAa,CAACG,QAAQ,CAAChB,MAAM,CAAC,CAAC;QAC/C;MACJ,CAAC;MAAA,gBANKM,kBAAkBA,CAAA;QAAA,OAAAC,KAAA,CAAAU,KAAA,OAAAC,SAAA;MAAA;IAAA,GAMvB;IAEDZ,kBAAkB,CAAC,CAAC;EACxB,CAAC,EAAE,CAACN,MAAM,CAAC,CAAC;EAEZ,IAAMmB,cAAc;IAAA,IAAAC,KAAA,GAAAZ,iBAAA,CAAG,aAAY;MAC/B,IAAIJ,UAAU,EAAE;QACZ,MAAMlB,MAAM,CAACC,GAAG,CAACI,EAAE,EAAE,OAAO,EAAEC,IAAI,CAACkB,WAAW,CAACC,GAAG,CAAC,EAAE;UACjDI,SAAS,EAAE1B,WAAW,CAACW,MAAM;QACjC,CAAC,EAAE;UAAEqB,KAAK,EAAE;QAAK,CAAC,CAAC;MACvB,CAAC,MAAM;QACH,MAAMnC,MAAM,CAACC,GAAG,CAACI,EAAE,EAAE,OAAO,EAAEC,IAAI,CAACkB,WAAW,CAACC,GAAG,CAAC,EAAE;UACjDI,SAAS,EAAE3B,UAAU,CAACY,MAAM;QAChC,CAAC,EAAE;UAAEqB,KAAK,EAAE;QAAK,CAAC,CAAC;MACvB;MACAhB,WAAW,CAAC,CAACD,UAAU,CAAC;IAC5B,CAAC;IAAA,gBAXKe,cAAcA,CAAA;MAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAWnB;EAED,OACIrB,IAAA,CAACF,gBAAgB;IAAC2B,OAAO,EAAEH,cAAe;IAAAI,QAAA,EACtC1B,IAAA,CAACJ,QAAQ;MAAC+B,KAAK,EAAEC,MAAM,CAACC,KAAM;MAACC,IAAI,EAAC,MAAM;MAACC,IAAI,EAAE,EAAG;MAACC,KAAK,EAAEzB,UAAU,GAAG,QAAQ,GAAG;IAAO,CAAE;EAAC,CAChF,CAAC;AAE3B;AAEA,IAAMqB,MAAM,GAAG/B,UAAU,CAACoC,MAAM,CAAC;EAC7BJ,KAAK,EAAE;IACHK,OAAO,EAAE;EACb;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}