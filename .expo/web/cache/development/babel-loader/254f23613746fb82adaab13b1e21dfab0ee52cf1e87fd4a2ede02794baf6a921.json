{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { setDoc, doc, arrayUnion, arrayRemove, getDoc } from 'firebase/firestore';\nimport { db, auth } from \"../FirebaseConfig.js\";\nimport { Ionicons } from '@expo/vector-icons';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function FavoriteCoin(_ref) {\n  var nftId = _ref.nftId,\n    image = _ref.image,\n    nom = _ref.nom,\n    prix = _ref.prix;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFavorite = _useState2[0],\n    setFavorite = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    nftLike = _useState4[0],\n    setNftLike = _useState4[1];\n  useEffect(function () {\n    var fetchUserFavorites = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var userDoc = yield getDoc(doc(db, 'users', auth.currentUser.uid));\n        if (userDoc.exists()) {\n          var userFavorites = userDoc.data().NftLike || [];\n          var newNftLike = {\n            id: nftId,\n            image: image,\n            nom: nom,\n            prix: prix\n          };\n          setFavorite(userFavorites.includes(newNftLike));\n          setNftLike(newNftLike);\n        }\n      });\n      return function fetchUserFavorites() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchUserFavorites();\n  }, [nftId]);\n  var toggleFavorite = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (isFavorite) {\n        yield setDoc(doc(db, 'users', auth.currentUser.uid), {\n          NftLike: arrayRemove(nftLike)\n        }, {\n          merge: true\n        });\n      } else {\n        yield setDoc(doc(db, 'users', auth.currentUser.uid), {\n          NftLike: arrayUnion(nftLike)\n        }, {\n          merge: true\n        });\n      }\n      setFavorite(!isFavorite);\n    });\n    return function toggleFavorite() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(TouchableOpacity, {\n    onPress: toggleFavorite,\n    children: _jsx(Ionicons, {\n      style: styles.stars,\n      name: \"star\",\n      size: 24,\n      color: isFavorite ? \"orange\" : \"gray\"\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  stars: {\n    padding: 15\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","setDoc","doc","arrayUnion","arrayRemove","getDoc","db","auth","Ionicons","StyleSheet","TouchableOpacity","jsx","_jsx","FavoriteCoin","_ref","nftId","image","nom","prix","_useState","_useState2","_slicedToArray","isFavorite","setFavorite","_useState3","_useState4","nftLike","setNftLike","fetchUserFavorites","_ref2","_asyncToGenerator","userDoc","currentUser","uid","exists","userFavorites","data","NftLike","newNftLike","id","includes","apply","arguments","toggleFavorite","_ref3","merge","onPress","children","style","styles","stars","name","size","color","create","padding"],"sources":["D:/0-ProjetPerso/QuantumQuasar/QuantumQuasar/screens/FavoriteNft.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { setDoc, doc, arrayUnion, arrayRemove, getDoc } from 'firebase/firestore';\r\nimport { db, auth } from '../FirebaseConfig.js';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nexport default function FavoriteCoin({ nftId, image, nom, prix }) {\r\n    const [isFavorite, setFavorite] = useState(false);\r\n    const [nftLike, setNftLike] = useState();\r\n\r\n    useEffect(() => {\r\n        const fetchUserFavorites = async () => {\r\n            const userDoc = await getDoc(doc(db, 'users', auth.currentUser.uid));\r\n            if (userDoc.exists()) {\r\n                const userFavorites = userDoc.data().NftLike || [];\r\n                const newNftLike = {\r\n                    id: nftId,\r\n                    image: image,\r\n                    nom: nom,\r\n                    prix: prix\r\n                }\r\n                setFavorite(userFavorites.includes(newNftLike));\r\n                setNftLike(newNftLike);     \r\n            }\r\n        };\r\n\r\n        fetchUserFavorites();\r\n    }, [nftId]);\r\n\r\n    const toggleFavorite = async () => {\r\n        if (isFavorite) {\r\n            await setDoc(doc(db, 'users', auth.currentUser.uid), {\r\n                NftLike: arrayRemove(nftLike)\r\n            }, { merge: true });\r\n        } else {\r\n            await setDoc(doc(db, 'users', auth.currentUser.uid), {\r\n                NftLike: arrayUnion(nftLike)\r\n            }, { merge: true });\r\n        }\r\n        setFavorite(!isFavorite);\r\n    }\r\n\r\n    return (\r\n        <TouchableOpacity onPress={toggleFavorite}>\r\n            <Ionicons style={styles.stars} name=\"star\" size={24} color={isFavorite ? \"orange\" : \"gray\"} />\r\n        </TouchableOpacity>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    stars: {\r\n        padding: 15,\r\n    },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}